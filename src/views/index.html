<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="color-scheme" content="dark" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <link href="../css/style.css" rel="stylesheet" />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
    <title id="app-title">EVE Settings Manager</title>
  </head>

  <body>
    <div class="container-fluid p-3 app-shell">
      <!-- SERVER / LANGUAGE -->
      <div id="server-section" class="row align-items-center">
        <div class="col-4">
          <div class="btn-group w-100">
            <img
              src="../assets/server.svg"
              class="server-icon me-2"
              id="server-icon"
            />
            <select
              id="server-select"
              class="form-select"
              aria-label="Server"
            ></select>
          </div>
        </div>

        <div class="col-4 d-flex justify-content-center">
          <h2 id="server-title" class="m-0"></h2>
        </div>

        <div class="col-4">
          <div class="btn-group w-100">
            <img
              src="../assets/language.svg"
              class="server-icon me-2"
              id="lang-icon"
            />
            <select
              id="language-select"
              class="form-select"
              aria-label="Language"
            ></select>
          </div>
        </div>
      </div>

      <!-- FOLDER SELECTOR + TOP BUTTONS -->
      <div id="folder-section" class="border-bottom pb-3 mt-2">
        <div id="folder-selector" class="px-0">
          <select
            id="folder-select"
            class="form-select"
            aria-label="Settings folder"
          ></select>
        </div>

        <div
          id="folder-buttons"
          class="d-flex justify-content-evenly mt-2 gap-2 flex-wrap"
        >
          <button
            id="select-folder-btn"
            type="button"
            class="btn btn-outline-dark"
          >
            <img src="../assets/check2-square.svg" />
            <span id="select-folder-btn-text">select folder</span>
          </button>

          <button
            id="open-folder-btn"
            type="button"
            class="btn btn-outline-dark"
          >
            <img src="../assets/folder2-open.svg" />
            <span id="open-folder-btn-text">open folder</span>
          </button>

          <button
            id="backup-btn"
            type="button"
            class="btn btn-outline-dark"
          >
            <img src="../assets/file-copy-outline.svg" />
            <span id="backup-btn-text">backup</span>
          </button>

          <button
            id="clear-cache-btn"
            type="button"
            class="btn btn-outline-dark"
          >
            <img src="../assets/cleaning-services.svg" />
            <span id="clear-cache-btn-text">clear cache</span>
          </button>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Export Links: saves your current links (this server + profile) to a JSON file."
            tabindex="0"
          >
            <button
              id="export-links-btn"
              type="button"
              class="btn btn-outline-dark"
            >
              <span class="btn-glyph">‚á©</span><span>export links</span>
            </button>
          </span>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Import Links: loads links from JSON and merges them into this server + profile (same-character links overwrite)."
            tabindex="0"
          >
            <button
              id="import-links-btn"
              type="button"
              class="btn btn-outline-dark"
            >
              <span class="btn-glyph">‚áß</span><span>import links</span>
            </button>
          </span>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Apply Links: copies the selected Character + its linked Account settings to every other linked pair in this profile. Backup first."
            tabindex="0"
          >
            <button
              id="apply-links-btn"
              type="button"
              class="btn btn-outline-dark"
              disabled
            >
              <span class="btn-glyph">‚áÑ</span><span>apply links</span>
            </button>
          </span>

          <!-- HELP BUTTON -->
          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Open a quick walkthrough, linking tips, and credits/copyright info."
            tabindex="0"
          >
            <button
              id="help-btn"
              type="button"
              class="btn btn-outline-dark"
            >
              <span class="btn-glyph">?</span><span>help</span>
            </button>
          </span>

          <input
            id="import-links-input"
            type="file"
            accept="application/json,.json"
            style="display:none"
          />
        </div>
      </div>

      <!-- TITLES -->
      <div id="select-titles" class="row mt-3">
        <div class="col-2">
          <h4 id="profile-table-title" class="m-0">Profiles</h4>
        </div>
        <div class="col-6">
          <h4 id="char-table-title" class="m-0">Characters</h4>
        </div>
        <div class="col-4">
          <h4 id="account-table-title" class="m-0">Accounts</h4>
        </div>
      </div>

      <!-- BADGES -->
      <div class="row mt-2">
        <div class="col-2"></div>
        <div class="col-6">
          <div id="char-badge" class="select-badge"></div>
        </div>
        <div class="col-4">
          <div
            id="acct-badge"
            class="select-badge text-end"
          ></div>
        </div>
      </div>

      <!-- MAIN LISTS -->
      <div id="table-section" class="row mt-1 table-row">
        <div class="col-2 col-pane">
          <select
            id="profile-select"
            class="form-select list-pane"
            size="18"
          ></select>
        </div>
        <div class="col-6 col-pane">
          <select
            id="char-select"
            class="form-select select-list list-pane"
            size="18"
          ></select>
        </div>
        <div class="col-4 col-pane">
          <select
            id="user-select"
            class="form-select select-list list-pane"
            size="18"
          ></select>
        </div>
      </div>

      <!-- CHARACTER BUTTONS -->
      <div id="select-buttons" class="row mt-2">
        <div class="col-2"></div>

        <div class="col-6">
          <div
            id="char-table-btn-group"
            class="d-flex gap-2 flex-wrap justify-content-start"
          >
            <button
              id="edit-char-description-btn"
              type="button"
              class="edit-description-btn btn btn-outline-dark"
            >
              <img src="../assets/edit-note.svg" />
              <span id="edit-char-description-btn-text">edit note</span>
            </button>

            <button
              id="overwrite-char-btn"
              type="button"
              class="overwrite-btn btn btn-success"
            >
              <img src="../assets/content-duplicate.svg" />
              <span id="overwrite-char-btn-text">overwrite all</span>
            </button>

            <button
              id="overwrite-selected-char-btn"
              type="button"
              class="overwrite-btn btn btn-outline-success"
            >
              <img src="../assets/open-in-new-rounded.svg" />
              <span id="overwrite-selected-char-btn-text">overwrite...</span>
            </button>
          </div>
        </div>

        <div class="col-4">
          <div
            id="account-table-btn-group"
            class="d-flex gap-2 flex-wrap justify-content-end"
          >
            <button
              id="edit-account-description-btn"
              type="button"
              class="edit-description-btn btn btn-outline-dark"
            >
              <img src="../assets/edit-note.svg" />
              <span id="edit-account-description-btn-text">edit note</span>
            </button>

            <button
              id="overwrite-account-btn"
              type="button"
              class="overwrite-btn btn btn-success"
            >
              <img src="../assets/content-duplicate.svg" />
              <span id="overwrite-account-btn-text">overwrite all</span>
            </button>

            <button
              id="overwrite-selected-account-btn"
              type="button"
              class="overwrite-btn btn btn-outline-success"
            >
              <img src="../assets/open-in-new-rounded.svg" />
              <span id="overwrite-selected-account-btn-text"
                >overwrite...</span
              >
            </button>
          </div>
        </div>
      </div>

      <!-- GROUP CONTROLS -->
      <div class="row mt-2">
        <div
          class="col-12 d-flex justify-content-center flex-wrap gap-2 align-items-center"
          id="group-controls"
        >
          <div
            class="d-flex align-items-center gap-2 flex-wrap justify-content-center"
          >
            <span class="text-muted small">Group</span>
            <select
              id="group-select"
              class="form-select form-select-sm w-auto"
              aria-label="Group select"
            ></select>
          </div>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="New Group: creates a new group for a subset of characters (so different subsets can share different settings)."
            tabindex="0"
          >
            <button
              id="new-group-btn"
              type="button"
              class="btn btn-outline-dark btn-sm"
            >
              <span class="btn-glyph">Ôºã</span><span>new</span>
            </button>
          </span>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Delete Group: deletes the selected group (does not delete any settings files)."
            tabindex="0"
          >
            <button
              id="delete-group-btn"
              type="button"
              class="btn btn-outline-dark btn-sm"
              disabled
            >
              <span class="btn-glyph">üóë</span><span>delete</span>
            </button>
          </span>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Add Char: adds the selected Character to the current group."
            tabindex="0"
          >
            <button
              id="add-to-group-btn"
              type="button"
              class="btn btn-outline-dark btn-sm"
              disabled
            >
              <span class="btn-glyph">Ôºã</span><span>add char</span>
            </button>
          </span>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Add Linked Chars: adds every character already linked to the selected Account into this group."
            tabindex="0"
          >
            <button
              id="add-linked-to-group-btn"
              type="button"
              class="btn btn-outline-dark btn-sm"
              disabled
            >
              <span class="btn-glyph">‚§í</span><span>add linked</span>
            </button>
          </span>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Remove Char: removes the selected Character from the current group."
            tabindex="0"
          >
            <button
              id="remove-from-group-btn"
              type="button"
              class="btn btn-outline-dark btn-sm"
              disabled
            >
              <span class="btn-glyph">Ôºç</span><span>remove</span>
            </button>
          </span>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Set Template: sets the selected Character as the template for this group. Apply Group copies THIS character+account settings to the other group members."
            tabindex="0"
          >
            <button
              id="set-template-btn"
              type="button"
              class="btn btn-outline-dark btn-sm"
              disabled
            >
              <span class="btn-glyph">‚òÖ</span><span>set template</span>
            </button>
          </span>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Apply Group: copies the group template Character + linked Account settings to ONLY the characters in this group (uses your saved links). Backup first."
            tabindex="0"
          >
            <button
              id="apply-group-btn"
              type="button"
              class="btn btn-outline-dark btn-sm"
              disabled
            >
              <span class="btn-glyph">‚áÑ</span><span>apply group</span>
            </button>
          </span>
        </div>
      </div>

      <!-- LINK CONTROLS -->
      <div id="link-row" class="row mt-2">
        <div class="col-12 d-flex justify-content-center flex-wrap gap-2">
          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Manual link: select a Character and an Account, then click ‚úì link to save that pairing."
            tabindex="0"
          >
            <button
              id="link-account-btn"
              type="button"
              class="btn btn-outline-dark"
              disabled
            >
              <span class="btn-glyph">‚úì</span><span>link</span>
            </button>
          </span>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Unlink: select a Character, then click ‚úï unlink to remove the saved pairing for that Character."
            tabindex="0"
          >
            <button
              id="unlink-account-btn"
              type="button"
              class="btn btn-outline-dark"
              disabled
            >
              <span class="btn-glyph">‚úï</span><span>unlink</span>
            </button>
          </span>

          <span
            class="tooltip-wrap d-inline-block"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="Auto Link: In EVE open Settings ‚Üí Audio and check/uncheck ‚ÄúUse Combat Music‚Äù to force a settings write. Then click ‚ü≥ auto link within ~10 seconds. It only succeeds if exactly one account file changed."
            tabindex="0"
          >
            <button
              id="auto-link-btn"
              type="button"
              class="btn btn-outline-dark"
              disabled
            >
              <span class="btn-glyph">‚ü≥</span><span>auto link</span>
            </button>
          </span>
        </div>
      </div>

      <!-- FOOTER / CREDITS -->
      <div
        id="footer-credits"
        class="footer-credits small text-muted text-center mt-3 pt-2"
      >
        EVE Settings Manager is not affiliated with CCP Games.<br />
        <a
          href="#"
          id="help-link"
          class="footer-link"
          role="button"
          >Credits/Copyright</a
        >
      </div>
    </div>

    <script>
      'use strict';
      const { init } = require('../js/utils');
      init();
    </script>
  </body>
</html>
